=================================================================================
-------clean
#use Time::HiRes qw( time); # import time function with miliseconds, else our log hash will be stored more than 10 times in a sec...

#    print "\n\nthr act: ";
#    foreach(threads->list(threads::running)){
#        print $_->tid()."\n";
#    }
my @job_logs;

---param conf si default
merge cu default de pe src dest .. 
merge si cu conf 

din gui.. merge sa pornesc si sa opresc din view ww , merge si daca inchid view ww si o inchid

=================================================================================
dialog:
http://www.bin-co.com/perl/perl_tk_tutorial/dialogs.php

bug: modif psths in gui
modif citire xml prim param (in cazul in care am bkp)

restore job conf
-gui: tabs: jobs/service/conf(srv smtp)

rez pb path bkp ( system facea escape iar la \\)
========
reset in  tab conf
nu mai folosesc bottom frame in tabul jobs
lista emails in edit job ww

validare email la adaugare inlista "+"
pb butoare cli dispar dupa getopenfile

sync.pl
list nu face die ci return
===========================2.03
13 sec in log sync pe un thr (facut queue, comentat pasarea laalt thr) ,15 in stats., ---fara print, erau dir deja syncronizate
10 sec-log, 12-stats, --cu print erau dir deja sync
8 sec-log, 9-=stats fara prints!!

0:0:56-log cand dest e goala, cu thr 
0:1:15-log ,dest goala, fara thr

err nu face join la toate thr.. cand comentez in sync pasarea la alte threaduri..pun 100 undef-uri

combinare:
%workerParams{src,parent} nepartajata ,.. ca sa stie fiecare thr unde pune logurile

..ordine aproape.. actiunea pe dir apelate recursiv apare in logul parintelui ( deci un add pt un dir care va avea alt log va aparea ca actiune in logul parintelui"

simulare thr picat cu die imediat dupa ce sync paseaza altui thr in queue primul dir din sursa
perl sync.pl --s "D:\casdev" --d "D:\test" -sid 1 -did 2
===========================5.03

optiune -mailto -smtp 
pus mails in opt 1/0 daca e valid, cele invalide: warning la inceputul logului si in $output{ROOT}{$opt{s}}{ERRORS}
daca smtp nu e specificat si mail e ,  warning la inceputul logului si in $output{ROOT}{$opt{s}}{ERRORS}, nu trimite mail.
redeschid log si scriu err care pot aparea in sendmail (smtp invalid,err modul
NU- sau.. scriu in output... $output{ROOT}{$opt{s}}{ERRORS}
scot die pt daca nu e dir sursa etc.. din &init>> pus in &list >> scriu in logh si in $output{ROOT}{$opt{s}}{ERRORS} 

share $output{ROOT}{$s}{ERRORS}

test: lista mails cu 2 invalide+ smtp > warning in log si trimite la ce e bun
no smtp+ lista mails
lista mails goala

perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de"
perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@conti" -smtp "smtphub07.conti.de"
perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com"
perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@contim"

perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com","radu.moisa@continental-corporation.com" -smtp "smtphub07.conti.de"

perl sync.pl -sid 1 -did 2 --s "D:\Per" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de"

setare warn daca e skip actiunea (in logg)

============================================7./03
sync.pl
print in stats .. closed filehandle..?
abia dupa ce am pus print la queue  mergea join la toate thr ,mdea.


simulat warns cu skip.. pune in mail
nu se trimite mail daca nu avem nici warnings nici unsuccessful
print intr-o variabila statisticile din log.. 

opt usethr
output e fol si de fct care trim mail....
 nu fac decat sa setez nr de thr create.. 1 daca nu am usethr (ca sa nu crape thr starter la die in sync( dir inexistente etc)...)
 
 teste foldere cu spatii si altele
 
 perl sync.pl -sid 1 -did 2 --s " C:\CISCO_CCNA" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de"
 ---SPATIU intre ghilimele>> chomp
 perl sync.pl -sid 1 -did 2 --s "C:\CISCO_CCNA" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de"
 perl sync.pl -sid 1 -did 2 --s "C:\CISCO_CCNA" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de" -usethr

 perl sync.pl -sid 1 -did 2 --s "C:\Documents and Settings\Default User" --d "D:\test1" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de" -usethr



perl sync.pl -sid 1 -did 2 --s "D:\Perl" --d "D:\test" -mail "Iustina.2.Melinte@continental-corporation.com" -smtp "smtphub07.conti.de" -usethr

========================================9.03
service:
serviceLogFile in conf
creaza fis de log daca nu ezxista si toate folderele

test pe rbgs:
sync pornit din cmd 
cmd.bat
perl sync.pl --conf "D:\synctool\conf.xml" -usethr -sid 1 -did 2 --s "\\rbgs392x\did01524\SW\TestSyncTool" --d "\\iad3488d\tcp_software\TestSyncTool" -mail "Iustina.2.Melinte@continental-corporation.com","radu.moisa@continental-corporation.com" -smtp "smtphub07.conti.de"

pun jobsconf cu un job .. cu mails eu si radu..
service compilez cu timere bune
copii installer? ilpune in c?
scm: start cu param 
-conf "D:\synctool\conf.xml"


FUCK
service.exe e salvat in C!!!! cand dau build
C:\Program Files\Continental AG\SyncToolServiceSetupWizard
LOL.. NU A PUS SERVICE.EXE IN BUILDUL DIN PROJ DE d PANA NU AM STERS TOT DIN FOLDERUL DEBUG AL PROJ SREVICE

D:\synctool>perl sync.pl --conf "D:\synctool\conf.xml" -usethr -sid 1 -did 2 --s "\\rbgs392x\did01524\SW\TestSyncTo
ol" --d "\\iad3488d\tcp_software\TestSyncTool" -mail "Iustina.2.Melinte@continental-corporation.com","radu.moisa@co
ntinental-corporation.com" -smtp "smtphub07.conti.de"


############################################### 12.03
pb path prealung nu mere nici copy in cmd 
poate copia de la sursa.. nmu poate scrie pe dest
nu pot copia nici daca fac chdir in dir destinatie
nici pe share in explorer nu pot crea un fisier cu nume mai mare

destinatia o construiesc cu Win32::GetShortPathName +nume fisier si mere copy
..nu mere -s (size) pe dest..pun la inceput in &sync.. ins ca a mers -f 
testat: mere alt pe destpath>255
ex:
\\rbgs392x\did01524\SW\TestSyncTool\mmpenv.MMP_Environment_for_DS_Client\MsVisualStudio2005+Sp1\Program Files\Microsoft Visual Studio 8\SDK\v2.0\QuickStart\aspnet\samples\security\logincontrols_cs\App_Themes\SmokeAndGlass\Images\smokeandglass_brownfadetop.gif

pb: nu apare in log dupa ce il rescrie:  ALT 
add err in output 

sync: adaugat attachement  log in mail
service : pathurile s si d din cmd cu ghilimele
daca fac stop si start rapid.. nu poate sterge fisierul running.. am pus try catch si scrie in log.

path catre perl executable.. daca nu e in conf , se opreste

testat: 
merge cu pathul catre perl citit din conf
conf inxistent: face onstop si inchide log si scrie in logul default
conf fara path

gui:
intrun for
#$frTabConf_Left->Label(-text =>"Running Folder: ", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Jobs Configuration Filename: ", -justify => 'left')->pack(-side => "top", -anchor => "nw");                       
#$frTabConf_Left->Label(-text =>"Sync Script Filename: ", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Porfiles Folder", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Logs Folder", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Backups Folder", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Touch Portfiles Interval (sec):", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"SMTP Server:", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Default Service Log:", -justify => 'left')->pack(-side => "top", -anchor => "nw");
#$frTabConf_Left->Label(-text =>"Perl Path:", -justify => 'left')->pack(-side => "top", -anchor => "nw");


